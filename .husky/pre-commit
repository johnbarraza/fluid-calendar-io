#!/bin/sh
. "$(dirname "$0")/../.huskyrc"

echo "Running pre-commit checks..."

# Run npm via cmd.exe to avoid mingw path translation issues
# This is the most reliable way on Windows GitHub Desktop
run_npm() {
  cmd.exe /c "npm $@"
}

# Run linting
echo "Running linting..."
run_npm run lint
if [ $? -ne 0 ]; then
  echo "Linting failed. Please fix the errors before committing."
  exit 1
fi

# Run type checking
echo "Running type checking..."
run_npm run type-check
if [ $? -ne 0 ]; then
  echo "Type checking failed. Please fix the errors before committing."
  exit 1
fi

echo "All checks passed!"
